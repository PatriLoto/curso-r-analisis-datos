<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title></title>
    <meta charset="utf-8" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/hygge.css" rel="stylesheet" />
    <link rel="stylesheet" href="animate.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: inverse, center


# &lt;svg style="height:0.8em;top:.04em;position:relative;fill:steelblue;" viewBox="0 0 581 512"&gt;&lt;path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/&gt;&lt;/svg&gt;  para anÃ¡lisis de datos ðŸš€&lt;br&gt; &lt;br&gt; 

## ðŸŽ‰ModelizaciÃ³n con tidymodels ðŸ’»&lt;br&gt; &lt;br&gt; &lt;br&gt; 

.large[Roxana N. VillafaÃ±e | LEMyP | &lt;a href='http://twitter.com/data_datum'&gt;&lt;svg style="height:0.8em;top:.04em;position:relative;fill:steelblue;" viewBox="0 0 512 512"&gt;&lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/&gt;&lt;/svg&gt; @data_datum&lt;/a&gt;] &lt;br&gt; 
.large[Florencia D'Andrea | INTA-CONICET | &lt;a href="http://twitter.com/cantoflor_87"&gt; &lt;svg style="height:0.8em;top:.04em;position:relative;fill:steelblue;" viewBox="0 0 512 512"&gt;&lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/&gt;&lt;/svg&gt; @cantoflor_87&lt;/a&gt;&lt;br&gt;] 


&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt; Slides disponibles en &lt;https://bit.ly/curso-r-fca&gt; âœ¨
&lt;br&gt; PÃ¡gina web del curso en &lt;https://curso-r-fca.netlify.com&gt; ðŸŒŸ

---
class:center, inverse

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidymodels.png" width="50%" align="middle" /&gt;

---


&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidymodels.png" width="10%" align="right" /&gt;

&lt;br&gt;&lt;br&gt;
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidym1.png" width="100%" align="center" /&gt;


---

background-image: url(C:/Users/Roxana/curso-r-analisis-datos/img/fondo-madera.png)
background-size: cover
class: center, middle

# Tidymodels es un grupo de paquetes centrado en las tareas de modelizaciÃ³n de datos. 
# La modelizaciÃ³n consta de varios pasos, la idea es que cada paso lo realice una librerÃ­a diferente. 


---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidymodels.png" width="10%" align="right" /&gt;

&lt;br&gt;&lt;br&gt;
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidym2.png" width="100%" align="center" /&gt;

--

### DocumentaciÃ³n
- Tidymodels https://github.com/tidymodels/tidymodels
- Rsample https://tidymodels.github.io/rsample/
- Recipes https://tidymodels.github.io/recipes/reference/index.html
- Parsnip https://tidymodels.github.io/parsnip/
- Yardstick https://tidymodels.github.io/yardstick/ 

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidymodels.png" width="10%" align="right" /&gt;


# En primer lugar instalamos tidymodels

```r
install.packages(tidymodels)
```


---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidymodels.png" width="10%" align="right" /&gt;


# LibrerÃ­as de Tidymodels

```r
library(tidymodels)
```

```
## Registered S3 method overwritten by 'xts':
##   method     from
##   as.zoo.xts zoo
```

```
## -- Attaching packages ---------------------------------------- tidymodels 0.0.3 --
```

```
## v broom     0.5.2       v purrr     0.3.3  
## v dials     0.0.4       v recipes   0.1.7  
## v dplyr     0.8.3       v rsample   0.0.5  
## v ggplot2   3.2.1       v tibble    2.1.3  
## v infer     0.5.1       v yardstick 0.0.4  
## v parsnip   0.0.3.1
```

```
## -- Conflicts ------------------------------------------- tidymodels_conflicts() --
## x purrr::discard()  masks scales::discard()
## x dplyr::filter()   masks stats::filter()
## x dplyr::lag()      masks stats::lag()
## x ggplot2::margin() masks dials::margin()
## x recipes::step()   masks stats::step()
```

---
background-image: url(C:/Users/Roxana/curso-r-analisis-datos/img/text-msg.png)
background-size: cover
class: center, middle

# âœ¨ 


---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/tidymodels.png" width="10%" align="right" /&gt;

# Dataset: Sonar
Como podemos ver las clases estÃ¡n prÃ¡cticamente balanceadas


```r
library(mlbench)
data(Sonar)
```



```r
summary(Sonar)
```

```
##        V1                V2                V3                V4         
##  Min.   :0.00150   Min.   :0.00060   Min.   :0.00150   Min.   :0.00580  
##  1st Qu.:0.01335   1st Qu.:0.01645   1st Qu.:0.01895   1st Qu.:0.02438  
##  Median :0.02280   Median :0.03080   Median :0.03430   Median :0.04405  
##  Mean   :0.02916   Mean   :0.03844   Mean   :0.04383   Mean   :0.05389  
##  3rd Qu.:0.03555   3rd Qu.:0.04795   3rd Qu.:0.05795   3rd Qu.:0.06450  
##  Max.   :0.13710   Max.   :0.23390   Max.   :0.30590   Max.   :0.42640  
##        V5                V6                V7               V8         
##  Min.   :0.00670   Min.   :0.01020   Min.   :0.0033   Min.   :0.00550  
##  1st Qu.:0.03805   1st Qu.:0.06703   1st Qu.:0.0809   1st Qu.:0.08042  
##  Median :0.06250   Median :0.09215   Median :0.1070   Median :0.11210  
##  Mean   :0.07520   Mean   :0.10457   Mean   :0.1217   Mean   :0.13480  
##  3rd Qu.:0.10028   3rd Qu.:0.13412   3rd Qu.:0.1540   3rd Qu.:0.16960  
##  Max.   :0.40100   Max.   :0.38230   Max.   :0.3729   Max.   :0.45900  
##        V9               V10              V11              V12        
##  Min.   :0.00750   Min.   :0.0113   Min.   :0.0289   Min.   :0.0236  
##  1st Qu.:0.09703   1st Qu.:0.1113   1st Qu.:0.1293   1st Qu.:0.1335  
##  Median :0.15225   Median :0.1824   Median :0.2248   Median :0.2490  
##  Mean   :0.17800   Mean   :0.2083   Mean   :0.2360   Mean   :0.2502  
##  3rd Qu.:0.23342   3rd Qu.:0.2687   3rd Qu.:0.3016   3rd Qu.:0.3312  
##  Max.   :0.68280   Max.   :0.7106   Max.   :0.7342   Max.   :0.7060  
##       V13              V14              V15              V16        
##  Min.   :0.0184   Min.   :0.0273   Min.   :0.0031   Min.   :0.0162  
##  1st Qu.:0.1661   1st Qu.:0.1752   1st Qu.:0.1646   1st Qu.:0.1963  
##  Median :0.2640   Median :0.2811   Median :0.2817   Median :0.3047  
##  Mean   :0.2733   Mean   :0.2966   Mean   :0.3202   Mean   :0.3785  
##  3rd Qu.:0.3513   3rd Qu.:0.3862   3rd Qu.:0.4529   3rd Qu.:0.5357  
##  Max.   :0.7131   Max.   :0.9970   Max.   :1.0000   Max.   :0.9988  
##       V17              V18              V19              V20        
##  Min.   :0.0349   Min.   :0.0375   Min.   :0.0494   Min.   :0.0656  
##  1st Qu.:0.2059   1st Qu.:0.2421   1st Qu.:0.2991   1st Qu.:0.3506  
##  Median :0.3084   Median :0.3683   Median :0.4350   Median :0.5425  
##  Mean   :0.4160   Mean   :0.4523   Mean   :0.5048   Mean   :0.5630  
##  3rd Qu.:0.6594   3rd Qu.:0.6791   3rd Qu.:0.7314   3rd Qu.:0.8093  
##  Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
##       V21              V22              V23              V24        
##  Min.   :0.0512   Min.   :0.0219   Min.   :0.0563   Min.   :0.0239  
##  1st Qu.:0.3997   1st Qu.:0.4069   1st Qu.:0.4502   1st Qu.:0.5407  
##  Median :0.6177   Median :0.6649   Median :0.6997   Median :0.6985  
##  Mean   :0.6091   Mean   :0.6243   Mean   :0.6470   Mean   :0.6727  
##  3rd Qu.:0.8170   3rd Qu.:0.8320   3rd Qu.:0.8486   3rd Qu.:0.8722  
##  Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
##       V25              V26              V27              V28        
##  Min.   :0.0240   Min.   :0.0921   Min.   :0.0481   Min.   :0.0284  
##  1st Qu.:0.5258   1st Qu.:0.5442   1st Qu.:0.5319   1st Qu.:0.5348  
##  Median :0.7211   Median :0.7545   Median :0.7456   Median :0.7319  
##  Mean   :0.6754   Mean   :0.6999   Mean   :0.7022   Mean   :0.6940  
##  3rd Qu.:0.8737   3rd Qu.:0.8938   3rd Qu.:0.9171   3rd Qu.:0.9003  
##  Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
##       V29              V30              V31              V32        
##  Min.   :0.0144   Min.   :0.0613   Min.   :0.0482   Min.   :0.0404  
##  1st Qu.:0.4637   1st Qu.:0.4114   1st Qu.:0.3456   1st Qu.:0.2814  
##  Median :0.6808   Median :0.6071   Median :0.4904   Median :0.4296  
##  Mean   :0.6421   Mean   :0.5809   Mean   :0.5045   Mean   :0.4390  
##  3rd Qu.:0.8521   3rd Qu.:0.7352   3rd Qu.:0.6420   3rd Qu.:0.5803  
##  Max.   :1.0000   Max.   :1.0000   Max.   :0.9657   Max.   :0.9306  
##       V33              V34              V35              V36        
##  Min.   :0.0477   Min.   :0.0212   Min.   :0.0223   Min.   :0.0080  
##  1st Qu.:0.2579   1st Qu.:0.2176   1st Qu.:0.1794   1st Qu.:0.1543  
##  Median :0.3912   Median :0.3510   Median :0.3127   Median :0.3211  
##  Mean   :0.4172   Mean   :0.4032   Mean   :0.3926   Mean   :0.3848  
##  3rd Qu.:0.5561   3rd Qu.:0.5961   3rd Qu.:0.5934   3rd Qu.:0.5565  
##  Max.   :1.0000   Max.   :0.9647   Max.   :1.0000   Max.   :1.0000  
##       V37              V38              V39              V40        
##  Min.   :0.0351   Min.   :0.0383   Min.   :0.0371   Min.   :0.0117  
##  1st Qu.:0.1601   1st Qu.:0.1743   1st Qu.:0.1740   1st Qu.:0.1865  
##  Median :0.3063   Median :0.3127   Median :0.2835   Median :0.2781  
##  Mean   :0.3638   Mean   :0.3397   Mean   :0.3258   Mean   :0.3112  
##  3rd Qu.:0.5189   3rd Qu.:0.4405   3rd Qu.:0.4349   3rd Qu.:0.4244  
##  Max.   :0.9497   Max.   :1.0000   Max.   :0.9857   Max.   :0.9297  
##       V41              V42              V43              V44        
##  Min.   :0.0360   Min.   :0.0056   Min.   :0.0000   Min.   :0.0000  
##  1st Qu.:0.1631   1st Qu.:0.1589   1st Qu.:0.1552   1st Qu.:0.1269  
##  Median :0.2595   Median :0.2451   Median :0.2225   Median :0.1777  
##  Mean   :0.2893   Mean   :0.2783   Mean   :0.2465   Mean   :0.2141  
##  3rd Qu.:0.3875   3rd Qu.:0.3842   3rd Qu.:0.3245   3rd Qu.:0.2717  
##  Max.   :0.8995   Max.   :0.8246   Max.   :0.7733   Max.   :0.7762  
##       V45               V46               V47               V48         
##  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
##  1st Qu.:0.09448   1st Qu.:0.06855   1st Qu.:0.06425   1st Qu.:0.04512  
##  Median :0.14800   Median :0.12135   Median :0.10165   Median :0.07810  
##  Mean   :0.19723   Mean   :0.16063   Mean   :0.12245   Mean   :0.09142  
##  3rd Qu.:0.23155   3rd Qu.:0.20037   3rd Qu.:0.15443   3rd Qu.:0.12010  
##  Max.   :0.70340   Max.   :0.72920   Max.   :0.55220   Max.   :0.33390  
##       V49               V50               V51                V52          
##  Min.   :0.00000   Min.   :0.00000   Min.   :0.000000   Min.   :0.000800  
##  1st Qu.:0.02635   1st Qu.:0.01155   1st Qu.:0.008425   1st Qu.:0.007275  
##  Median :0.04470   Median :0.01790   Median :0.013900   Median :0.011400  
##  Mean   :0.05193   Mean   :0.02042   Mean   :0.016069   Mean   :0.013420  
##  3rd Qu.:0.06853   3rd Qu.:0.02527   3rd Qu.:0.020825   3rd Qu.:0.016725  
##  Max.   :0.19810   Max.   :0.08250   Max.   :0.100400   Max.   :0.070900  
##       V53                V54                V55               V56          
##  Min.   :0.000500   Min.   :0.001000   Min.   :0.00060   Min.   :0.000400  
##  1st Qu.:0.005075   1st Qu.:0.005375   1st Qu.:0.00415   1st Qu.:0.004400  
##  Median :0.009550   Median :0.009300   Median :0.00750   Median :0.006850  
##  Mean   :0.010709   Mean   :0.010941   Mean   :0.00929   Mean   :0.008222  
##  3rd Qu.:0.014900   3rd Qu.:0.014500   3rd Qu.:0.01210   3rd Qu.:0.010575  
##  Max.   :0.039000   Max.   :0.035200   Max.   :0.04470   Max.   :0.039400  
##       V57               V58                V59                V60          
##  Min.   :0.00030   Min.   :0.000300   Min.   :0.000100   Min.   :0.000600  
##  1st Qu.:0.00370   1st Qu.:0.003600   1st Qu.:0.003675   1st Qu.:0.003100  
##  Median :0.00595   Median :0.005800   Median :0.006400   Median :0.005300  
##  Mean   :0.00782   Mean   :0.007949   Mean   :0.007941   Mean   :0.006507  
##  3rd Qu.:0.01043   3rd Qu.:0.010350   3rd Qu.:0.010325   3rd Qu.:0.008525  
##  Max.   :0.03550   Max.   :0.044000   Max.   :0.036400   Max.   :0.043900  
##  Class  
##  M:111  
##  R: 97  
##         
##         
##         
## 
```

---
class: inverse, center

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/rsample.png" width="50%" align="center" /&gt;

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/rsample.png" width="10%" align="right" /&gt;

# 1Â° Paso: Dividir los datos

### Crear un set de datos training / testing con la librerÃ­a *rsamples*



```r
sonar_split &lt;- rsample::initial_split(Sonar, prop = 0.6)
sonar_split
```

```
## &lt;125/83/208&gt;
```


Estos son los datos de training/testing/total 

---
background-image: url(C:/Users/Roxana/curso-r-analisis-datos/img/text2.png)
background-size: cover
class: center, middle, inverse

 

# ðŸ’» DEMO ðŸ’»



---
class: inverse, center

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/recipes.jpg" width="60%" align="center" /&gt;

---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/recipes_allison.png" width="100%" align="center" /&gt;


---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/recipes.jpg" width="10%" align="right" /&gt;

# 2Â° Paso: Preprocesamiento

- **recipe()**: empieza una lista de transformaciones a ser aplicadas
- **prep()**: Indica que hay que ejecutar todos los pasos anteriores. 
&lt;br&gt;
- **step_corr()**: remueve todas las variables con alta correlaciÃ³n
- **step_center()**: centrar los datos con media igual a 0. 
- **step_scale()**: Normaliza con desvÃ­o estÃ¡ndar igual a 1. 
&lt;br&gt;
- **all_predictors()** y **all_outcomes()** son todas las variables predictivas y predictoras



```r
sonar_recipe &lt;- training(sonar_split) %&gt;%
  recipe(Class~.) %&gt;%
  step_corr(all_predictors()) %&gt;%
  step_center(all_predictors(), -all_outcomes()) %&gt;%
  step_scale(all_predictors(), -all_outcomes()) %&gt;%
  prep()
```


---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/recipes.jpg" width="10%" align="right" /&gt;


```r
sonar_recipe &lt;- training(sonar_split) %&gt;%
  recipe(Class~.) %&gt;%
  step_corr(all_predictors()) %&gt;%
  step_center(all_predictors(), -all_outcomes()) %&gt;%
  step_scale(all_predictors(), -all_outcomes()) %&gt;%
  prep()
```


```r
sonar_recipe
```

```
## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor         60
## 
## Training data contained 125 data points and no missing data.
## 
## Operations:
## 
## Correlation filter removed V10, V11, V18, V15, V16, V20, V48 [trained]
## Centering for V1, V2, V3, V4, V5, V6, V7, V8, V9, V12, ... [trained]
## Scaling for V1, V2, V3, V4, V5, V6, V7, V8, V9, V12, ... [trained]
```

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/recipes.jpg" width="10%" align="right" /&gt;

- **juice()** se utiliza para darle formato final al dataset antes del procesamiento de los datos


```r
sonar_training &lt;- juice(sonar_recipe)

head(sonar_training)
```

```
## # A tibble: 6 x 54
##        V1      V2     V3     V4     V5     V6      V7     V8     V9    V12
##     &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 -0.0487  0.746   1.79   1.16   0.475  2.44   2.15    2.99   3.21   3.20 
## 2  2.30    1.02    0.176 -0.274 -0.244 -0.631  0.0429  1.42   1.51   1.01 
## 3 -0.232   0.0709  0.183 -0.106 -0.137 -0.740 -0.745  -1.43  -0.910 -0.612
## 4 -0.510  -0.588  -0.174 -0.946 -0.998 -0.589 -0.221  -0.713 -0.677 -1.03 
## 5 -1.10   -0.947  -0.682 -0.394 -0.768 -1.32  -1.36   -1.22  -1.21  -1.08 
## 6 -0.909  -0.872  -0.935 -0.573 -0.704 -0.825 -1.13   -0.399 -0.637 -0.921
## # ... with 44 more variables: V13 &lt;dbl&gt;, V14 &lt;dbl&gt;, V17 &lt;dbl&gt;, V19 &lt;dbl&gt;,
## #   V21 &lt;dbl&gt;, V22 &lt;dbl&gt;, V23 &lt;dbl&gt;, V24 &lt;dbl&gt;, V25 &lt;dbl&gt;, V26 &lt;dbl&gt;,
## #   V27 &lt;dbl&gt;, V28 &lt;dbl&gt;, V29 &lt;dbl&gt;, V30 &lt;dbl&gt;, V31 &lt;dbl&gt;, V32 &lt;dbl&gt;,
## #   V33 &lt;dbl&gt;, V34 &lt;dbl&gt;, V35 &lt;dbl&gt;, V36 &lt;dbl&gt;, V37 &lt;dbl&gt;, V38 &lt;dbl&gt;,
## #   V39 &lt;dbl&gt;, V40 &lt;dbl&gt;, V41 &lt;dbl&gt;, V42 &lt;dbl&gt;, V43 &lt;dbl&gt;, V44 &lt;dbl&gt;,
## #   V45 &lt;dbl&gt;, V46 &lt;dbl&gt;, V47 &lt;dbl&gt;, V49 &lt;dbl&gt;, V50 &lt;dbl&gt;, V51 &lt;dbl&gt;,
## #   V52 &lt;dbl&gt;, V53 &lt;dbl&gt;, V54 &lt;dbl&gt;, V55 &lt;dbl&gt;, V56 &lt;dbl&gt;, V57 &lt;dbl&gt;,
## #   V58 &lt;dbl&gt;, V59 &lt;dbl&gt;, V60 &lt;dbl&gt;, Class &lt;fct&gt;
```


.footnote[https://tidymodels.github.io/recipes/reference/juice.html
]

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/recipes.jpg" width="10%" align="right" /&gt;


```r
sonar_testing &lt;- sonar_recipe %&gt;%
  bake(testing(sonar_split)) 

sonar_testing
```

```
## # A tibble: 83 x 54
##         V1      V2      V3     V4     V5       V6      V7      V8     V9    V12
##      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 -0.340   0.0579  0.0373 -0.662  0.437  0.00348  0.613   0.375   1.13  -0.662
##  2  0.849   0.554   1.12    0.338  0.866  3.01     1.68    2.64    1.32   2.85 
##  3 -0.810  -0.594   0.546  -0.666 -0.964 -1.16    -0.149  -0.0160 -0.982 -0.373
##  4  0.0641  0.325  -0.356  -0.730 -0.629  0.0110   0.0291  0.654   0.283  1.22 
##  5  0.210   1.97    2.37    1.83   1.78   1.37    -0.783   0.134   0.264 -1.31 
##  6  1.16    0.635   1.12   -0.430  0.819 -0.117   -0.272  -0.814  -0.255  0.399
##  7 -0.702  -0.144  -0.638  -0.442 -0.678 -1.66    -1.73   -0.855  -0.543 -1.18 
##  8  0.121   0.854   0.616   0.819  1.67   2.47     1.71    0.895  -0.260  0.794
##  9 -0.378   0.828  -0.0930  0.514  1.25  -0.330   -1.06   -1.29   -0.614 -0.649
## 10  0.943   0.508   1.06    1.51   1.99   3.93     3.15    1.29    1.73   0.274
## # ... with 73 more rows, and 44 more variables: V13 &lt;dbl&gt;, V14 &lt;dbl&gt;,
## #   V17 &lt;dbl&gt;, V19 &lt;dbl&gt;, V21 &lt;dbl&gt;, V22 &lt;dbl&gt;, V23 &lt;dbl&gt;, V24 &lt;dbl&gt;,
## #   V25 &lt;dbl&gt;, V26 &lt;dbl&gt;, V27 &lt;dbl&gt;, V28 &lt;dbl&gt;, V29 &lt;dbl&gt;, V30 &lt;dbl&gt;,
## #   V31 &lt;dbl&gt;, V32 &lt;dbl&gt;, V33 &lt;dbl&gt;, V34 &lt;dbl&gt;, V35 &lt;dbl&gt;, V36 &lt;dbl&gt;,
## #   V37 &lt;dbl&gt;, V38 &lt;dbl&gt;, V39 &lt;dbl&gt;, V40 &lt;dbl&gt;, V41 &lt;dbl&gt;, V42 &lt;dbl&gt;,
## #   V43 &lt;dbl&gt;, V44 &lt;dbl&gt;, V45 &lt;dbl&gt;, V46 &lt;dbl&gt;, V47 &lt;dbl&gt;, V49 &lt;dbl&gt;,
## #   V50 &lt;dbl&gt;, V51 &lt;dbl&gt;, V52 &lt;dbl&gt;, V53 &lt;dbl&gt;, V54 &lt;dbl&gt;, V55 &lt;dbl&gt;,
## #   V56 &lt;dbl&gt;, V57 &lt;dbl&gt;, V58 &lt;dbl&gt;, V59 &lt;dbl&gt;, V60 &lt;dbl&gt;, Class &lt;fct&gt;
```


.footnote[https://tidymodels.github.io/recipes/reference/bake.html
]
---
class: inverse, center

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip_h.png" width="70%" align="center" /&gt;

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip_allison.png" width="100%" align="center" /&gt;

---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip.png" width="15%" align="right" /&gt;

## 3Â° Entrenamiento

- Para a entrenar un modelo de random forest con librerÃ­a {ranger} y {randomForest} en el set de entrenamiento. 
- Se puede entrenar cualquier modelo de clasificaciÃ³n

```r
sonar_ranger &lt;- rand_forest(trees = 100, mode = "classification") %&gt;%
  set_engine("ranger") %&gt;%
  fit(Class~., data = sonar_training)

sonar_ranger
```

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip.png" width="15%" align="right" /&gt;
{ranger}

```r
sonar_ranger &lt;- rand_forest(trees = 100, mode = "classification") %&gt;%
  set_engine("ranger") %&gt;%
  fit(Class~., data = sonar_training)

sonar_ranger
```

```
## parsnip model object
## 
## Ranger result
## 
## Call:
##  ranger::ranger(formula = formula, data = data, num.trees = ~100,      num.threads = 1, verbose = FALSE, seed = sample.int(10^5,          1), probability = TRUE) 
## 
## Type:                             Probability estimation 
## Number of trees:                  100 
## Sample size:                      125 
## Number of independent variables:  53 
## Mtry:                             7 
## Target node size:                 10 
## Variable importance mode:         none 
## Splitrule:                        gini 
## OOB prediction error (Brier s.):  0.139991
```


---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip.png" width="15%" align="right" /&gt;

{randomForest}

```r
sonar_rf &lt;- rand_forest(trees = 100, mode = "classification") %&gt;%
  set_engine("randomForest") %&gt;%
  fit(Class~., data = sonar_training)

sonar_rf
```

```
## parsnip model object
## 
## 
## Call:
##  randomForest(x = as.data.frame(x), y = y, ntree = ~100) 
##                Type of random forest: classification
##                      Number of trees: 100
## No. of variables tried at each split: 7
## 
##         OOB estimate of  error rate: 21.6%
## Confusion matrix:
##    M  R class.error
## M 58  8   0.1212121
## R 19 40   0.3220339
```

---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip.png" width="15%" align="right" /&gt;


```r
predict(sonar_ranger, sonar_testing)
```

```
## # A tibble: 83 x 1
##    .pred_class
##    &lt;fct&gt;      
##  1 R          
##  2 M          
##  3 R          
##  4 R          
##  5 M          
##  6 M          
##  7 R          
##  8 M          
##  9 M          
## 10 M          
## # ... with 73 more rows
```



---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/parsnip.png" width="15%" align="right" /&gt;


```r
sonar_ranger %&gt;%
  predict(sonar_testing) %&gt;%
  bind_cols(sonar_testing) 
```

```
## # A tibble: 83 x 55
##    .pred_class      V1      V2      V3     V4     V5       V6      V7      V8
##    &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 R           -0.340   0.0579  0.0373 -0.662  0.437  0.00348  0.613   0.375 
##  2 M            0.849   0.554   1.12    0.338  0.866  3.01     1.68    2.64  
##  3 R           -0.810  -0.594   0.546  -0.666 -0.964 -1.16    -0.149  -0.0160
##  4 R            0.0641  0.325  -0.356  -0.730 -0.629  0.0110   0.0291  0.654 
##  5 M            0.210   1.97    2.37    1.83   1.78   1.37    -0.783   0.134 
##  6 M            1.16    0.635   1.12   -0.430  0.819 -0.117   -0.272  -0.814 
##  7 R           -0.702  -0.144  -0.638  -0.442 -0.678 -1.66    -1.73   -0.855 
##  8 M            0.121   0.854   0.616   0.819  1.67   2.47     1.71    0.895 
##  9 M           -0.378   0.828  -0.0930  0.514  1.25  -0.330   -1.06   -1.29  
## 10 M            0.943   0.508   1.06    1.51   1.99   3.93     3.15    1.29  
## # ... with 73 more rows, and 46 more variables: V9 &lt;dbl&gt;, V12 &lt;dbl&gt;, V13 &lt;dbl&gt;,
## #   V14 &lt;dbl&gt;, V17 &lt;dbl&gt;, V19 &lt;dbl&gt;, V21 &lt;dbl&gt;, V22 &lt;dbl&gt;, V23 &lt;dbl&gt;,
## #   V24 &lt;dbl&gt;, V25 &lt;dbl&gt;, V26 &lt;dbl&gt;, V27 &lt;dbl&gt;, V28 &lt;dbl&gt;, V29 &lt;dbl&gt;,
## #   V30 &lt;dbl&gt;, V31 &lt;dbl&gt;, V32 &lt;dbl&gt;, V33 &lt;dbl&gt;, V34 &lt;dbl&gt;, V35 &lt;dbl&gt;,
## #   V36 &lt;dbl&gt;, V37 &lt;dbl&gt;, V38 &lt;dbl&gt;, V39 &lt;dbl&gt;, V40 &lt;dbl&gt;, V41 &lt;dbl&gt;,
## #   V42 &lt;dbl&gt;, V43 &lt;dbl&gt;, V44 &lt;dbl&gt;, V45 &lt;dbl&gt;, V46 &lt;dbl&gt;, V47 &lt;dbl&gt;,
## #   V49 &lt;dbl&gt;, V50 &lt;dbl&gt;, V51 &lt;dbl&gt;, V52 &lt;dbl&gt;, V53 &lt;dbl&gt;, V54 &lt;dbl&gt;,
## #   V55 &lt;dbl&gt;, V56 &lt;dbl&gt;, V57 &lt;dbl&gt;, V58 &lt;dbl&gt;, V59 &lt;dbl&gt;, V60 &lt;dbl&gt;,
## #   Class &lt;fct&gt;
```

---
class: inverse, center

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.png" width="60%" align="center" /&gt;



---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;

### 4Â° ValidaciÃ³n


```r
sonar_ranger %&gt;%
  predict(sonar_testing) %&gt;%
  bind_cols(sonar_testing) %&gt;%
  metrics(truth=Class, estimate=.pred_class)
```

```
## # A tibble: 2 x 3
##   .metric  .estimator .estimate
##   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
## 1 accuracy binary         0.783
## 2 kap      binary         0.556
```

---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;



```r
sonar_rf %&gt;%
  predict(sonar_testing) %&gt;%
  bind_cols(sonar_testing) %&gt;%
  metrics(truth=Class, estimate=.pred_class)
```

```
## # A tibble: 2 x 3
##   .metric  .estimator .estimate
##   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
## 1 accuracy binary         0.783
## 2 kap      binary         0.554
```

---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;


```r
sonar_ranger %&gt;%
  predict(sonar_testing, type="prob")
```

```
## # A tibble: 83 x 2
##    .pred_M .pred_R
##      &lt;dbl&gt;   &lt;dbl&gt;
##  1   0.447   0.553
##  2   0.589   0.411
##  3   0.328   0.672
##  4   0.380   0.620
##  5   0.555   0.445
##  6   0.717   0.283
##  7   0.414   0.586
##  8   0.521   0.479
##  9   0.509   0.491
## 10   0.596   0.404
## # ... with 73 more rows
```
---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;



```r
sonar_probs &lt;- sonar_ranger %&gt;%
  predict(sonar_testing, type = "prob") %&gt;%
  bind_cols(sonar_testing)
sonar_probs
```

```
## # A tibble: 83 x 56
##    .pred_M .pred_R      V1      V2      V3     V4     V5       V6      V7
##      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
##  1   0.447   0.553 -0.340   0.0579  0.0373 -0.662  0.437  0.00348  0.613 
##  2   0.589   0.411  0.849   0.554   1.12    0.338  0.866  3.01     1.68  
##  3   0.328   0.672 -0.810  -0.594   0.546  -0.666 -0.964 -1.16    -0.149 
##  4   0.380   0.620  0.0641  0.325  -0.356  -0.730 -0.629  0.0110   0.0291
##  5   0.555   0.445  0.210   1.97    2.37    1.83   1.78   1.37    -0.783 
##  6   0.717   0.283  1.16    0.635   1.12   -0.430  0.819 -0.117   -0.272 
##  7   0.414   0.586 -0.702  -0.144  -0.638  -0.442 -0.678 -1.66    -1.73  
##  8   0.521   0.479  0.121   0.854   0.616   0.819  1.67   2.47     1.71  
##  9   0.509   0.491 -0.378   0.828  -0.0930  0.514  1.25  -0.330   -1.06  
## 10   0.596   0.404  0.943   0.508   1.06    1.51   1.99   3.93     3.15  
## # ... with 73 more rows, and 47 more variables: V8 &lt;dbl&gt;, V9 &lt;dbl&gt;, V12 &lt;dbl&gt;,
## #   V13 &lt;dbl&gt;, V14 &lt;dbl&gt;, V17 &lt;dbl&gt;, V19 &lt;dbl&gt;, V21 &lt;dbl&gt;, V22 &lt;dbl&gt;,
## #   V23 &lt;dbl&gt;, V24 &lt;dbl&gt;, V25 &lt;dbl&gt;, V26 &lt;dbl&gt;, V27 &lt;dbl&gt;, V28 &lt;dbl&gt;,
## #   V29 &lt;dbl&gt;, V30 &lt;dbl&gt;, V31 &lt;dbl&gt;, V32 &lt;dbl&gt;, V33 &lt;dbl&gt;, V34 &lt;dbl&gt;,
## #   V35 &lt;dbl&gt;, V36 &lt;dbl&gt;, V37 &lt;dbl&gt;, V38 &lt;dbl&gt;, V39 &lt;dbl&gt;, V40 &lt;dbl&gt;,
## #   V41 &lt;dbl&gt;, V42 &lt;dbl&gt;, V43 &lt;dbl&gt;, V44 &lt;dbl&gt;, V45 &lt;dbl&gt;, V46 &lt;dbl&gt;,
## #   V47 &lt;dbl&gt;, V49 &lt;dbl&gt;, V50 &lt;dbl&gt;, V51 &lt;dbl&gt;, V52 &lt;dbl&gt;, V53 &lt;dbl&gt;,
## #   V54 &lt;dbl&gt;, V55 &lt;dbl&gt;, V56 &lt;dbl&gt;, V57 &lt;dbl&gt;, V58 &lt;dbl&gt;, V59 &lt;dbl&gt;,
## #   V60 &lt;dbl&gt;, Class &lt;fct&gt;
```

---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;



```r
sonar_probs %&gt;%
  gain_curve(.pred_M, truth=Class) %&gt;%
  glimpse()
```

```
## Observations: 84
## Variables: 4
## $ .n              &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1...
## $ .n_events       &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1...
## $ .percent_tested &lt;dbl&gt; 0.000000, 1.204819, 2.409639, 3.614458, 4.819277, 6...
## $ .percent_found  &lt;dbl&gt; 0.000000, 2.222222, 4.444444, 6.666667, 8.888889, 1...
```


---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;


```r
sonar_probs%&gt;%
  gain_curve(.pred_M, truth=Class) %&gt;%
  autoplot()
```

![](ml-fundamentals_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;


---
&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;


```r
sonar_probs%&gt;%
  roc_curve(.pred_M, truth=Class) %&gt;%
  autoplot()
```

![](ml-fundamentals_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

---

&lt;img src="C://Users/Roxana/curso-r-analisis-datos/img/yardstick.jpg" width="10%" align="right" /&gt;



```r
predict(sonar_ranger, sonar_testing, type = "prob") %&gt;%
  bind_cols(predict(sonar_ranger, sonar_testing)) %&gt;%
  bind_cols(select(sonar_testing, Class)) %&gt;%
  metrics(Class, .pred_M, estimate = .pred_class)
```

```
## # A tibble: 4 x 3
##   .metric     .estimator .estimate
##   &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;
## 1 accuracy    binary         0.783
## 2 kap         binary         0.556
## 3 mn_log_loss binary         0.484
## 4 roc_auc     binary         0.887
```


---
# BibliografÃ­a

- Tutorial de Tidymodels
https://rviews.rstudio.com/2019/06/19/a-gentle-intro-to-tidymodels/
- Tutorial de Tidymodels (espaÃ±ol)
https://diegokoz.github.io/EEA2019/clase%208/tidymodels.nb.html
- parsnip: A tidy model interface - Max Kuhn (video)
bit.ly/parsnip-rstudioconf2019 
- Recipes for data Preprocessing - Max Kuhn (video)
bit.ly/recipes-useR2018






---


```r
sessionInfo() 
```

```
## R version 3.6.1 (2019-07-05)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18362)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=Spanish_Argentina.1252  LC_CTYPE=Spanish_Argentina.1252   
## [3] LC_MONETARY=Spanish_Argentina.1252 LC_NUMERIC=C                      
## [5] LC_TIME=Spanish_Argentina.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] mlbench_2.1-1     yardstick_0.0.4   tibble_2.1.3      rsample_0.0.5    
##  [5] tidyr_1.0.0       recipes_0.1.7     purrr_0.3.3       parsnip_0.0.3.1  
##  [9] infer_0.5.1       ggplot2_3.2.1     dplyr_0.8.3       dials_0.0.4      
## [13] scales_1.0.0      broom_0.5.2       tidymodels_0.0.3  emo_0.0.0.9000   
## [17] fontawesome_0.1.0
## 
## loaded via a namespace (and not attached):
##   [1] minqa_1.2.4           colorspace_1.4-1      class_7.3-15         
##   [4] ggridges_0.5.1        rsconnect_0.8.15      markdown_1.1         
##   [7] base64enc_0.1-3       tidytext_0.2.2        rstudioapi_0.10      
##  [10] listenv_0.7.0         furrr_0.1.0           xaringan_0.11        
##  [13] rstan_2.19.2          SnowballC_0.6.0       DT_0.8               
##  [16] fansi_0.4.0           prodlim_2018.04.18    lubridate_1.7.4      
##  [19] ranger_0.11.2         codetools_0.2-16      splines_3.6.1        
##  [22] knitr_1.26            shinythemes_1.1.2     zeallot_0.1.0        
##  [25] bayesplot_1.7.0       nloptr_1.2.1          pROC_1.15.3          
##  [28] shiny_1.3.2           compiler_3.6.1        backports_1.1.5      
##  [31] assertthat_0.2.1      Matrix_1.2-17         lazyeval_0.2.2       
##  [34] cli_1.1.0             later_1.0.0           htmltools_0.4.0      
##  [37] prettyunits_1.0.2     tools_3.6.1           igraph_1.2.4.1       
##  [40] gtable_0.3.0          glue_1.3.1            reshape2_1.4.3       
##  [43] Rcpp_1.0.3            DiceDesign_1.8-1      vctrs_0.2.0          
##  [46] nlme_3.1-140          crosstalk_1.0.0       timeDate_3043.102    
##  [49] gower_0.2.1           xfun_0.11             stringr_1.4.0        
##  [52] globals_0.12.4        ps_1.3.0              lme4_1.1-21          
##  [55] mime_0.7              miniUI_0.1.1.1        lifecycle_0.1.0      
##  [58] gtools_3.8.1          tidypredict_0.4.3     future_1.14.0        
##  [61] MASS_7.3-51.4         zoo_1.8-6             ipred_0.9-9          
##  [64] rstanarm_2.18.2       colourpicker_1.0      promises_1.0.1       
##  [67] parallel_3.6.1        inline_0.3.15         shinystan_2.5.0      
##  [70] tidyposterior_0.0.2   yaml_2.2.0            gridExtra_2.3        
##  [73] loo_2.1.0             StanHeaders_2.18.1-10 rpart_4.1-15         
##  [76] stringi_1.4.3         tokenizers_0.2.1      dygraphs_1.1.1.6     
##  [79] randomForest_4.6-14   boot_1.3-22           pkgbuild_1.0.4       
##  [82] lava_1.6.6            matrixStats_0.54.0    rlang_0.4.2          
##  [85] pkgconfig_2.0.3       evaluate_0.14         lattice_0.20-38      
##  [88] labeling_0.3          rstantools_1.5.1      htmlwidgets_1.3      
##  [91] tidyselect_0.2.5      processx_3.4.1        plyr_1.8.4           
##  [94] magrittr_1.5          R6_2.4.0              generics_0.0.2       
##  [97] pillar_1.4.2          withr_2.1.2           xts_0.11-2           
## [100] survival_2.44-1.1     nnet_7.3-12           janeaustenr_0.1.5    
## [103] crayon_1.3.4          utf8_1.1.4            rmarkdown_2.0        
## [106] grid_3.6.1            callr_3.3.1           threejs_0.3.1        
## [109] digest_0.6.23         xtable_1.8-4          httpuv_1.5.1         
## [112] stats4_3.6.1          munsell_0.5.0         shinyjs_1.0
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
